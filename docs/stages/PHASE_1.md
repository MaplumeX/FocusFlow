# Phase 1: MVP 核心功能 - 阶段任务文档

**阶段代号:** Phase 1
**阶段名称:** MVP（最小可行产品）
**开始日期:** 2025-11-29
**结束日期:** 2025-12-13
**工期:** 2 周（10 个工作日）
**里程碑:** M1 - MVP 完成
**状态:** 🟡 待启动

---

## 📋 目录

1. [阶段目标](#1-阶段目标)
2. [核心交付物](#2-核心交付物)
3. [任务列表](#3-任务列表)
4. [依赖关系](#4-依赖关系)
5. [验收标准](#5-验收标准)
6. [红线检查](#6-红线检查)
7. [规范检查](#7-规范检查)
8. [风险与应对](#8-风险与应对)

---

## 1. 阶段目标

### 1.1 核心目标

**构建可运行的 MVP，验证核心概念**

具体目标：
- ✅ 搭建完整的项目架构（Electron + React + Vite）
- ✅ 实现专注事项管理（CRUD）
- ✅ 实现基础计时器功能
- ✅ 实现本地数据持久化（SQLite）
- ✅ 实现系统通知

### 1.2 成功标准

**功能性：**
- 用户能够创建/编辑/删除专注事项
- 用户能够选择事项并开始计时
- 计时器能够准确倒计时（误差 < 1 秒）
- 工作结束时显示系统通知

**技术性：**
- 项目能够正常启动（`pnpm dev`）
- 数据能够持久化到本地数据库
- IPC 通信正常工作
- 仅使用 5 个生产依赖

---

## 2. 核心交付物

### 2.1 交付物清单

| # | 交付物名称 | 类型 | 优先级 | 负责人 | 状态 |
|---|-----------|------|--------|--------|------|
| 1 | 项目架构搭建 | 代码 | P0 | 开发 | 🔴 待启动 |
| 2 | 数据库 Schema | SQL | P0 | 开发 | 🔴 待启动 |
| 3 | 数据库操作封装 | 代码 | P0 | 开发 | 🔴 待启动 |
| 4 | IPC 通信层 | 代码 | P0 | 开发 | 🔴 待启动 |
| 5 | 专注事项 CRUD | 代码 | P0 | 开发 | 🔴 待启动 |
| 6 | 计时器组件 | 代码 | P0 | 开发 | 🔴 待启动 |
| 7 | 事项管理页面 | 代码 | P0 | 开发 | 🔴 待启动 |
| 8 | 系统通知模块 | 代码 | P1 | 开发 | 🔴 待启动 |
| 9 | MVP Demo | 可执行程序 | P0 | 开发 | 🔴 待启动 |
| 10 | 技术文档 | 文档 | P1 | 开发 | 🔴 待启动 |

**优先级说明：**
- P0: 必须完成（阻塞后续开发）
- P1: 高优先级（影响用户体验）
- P2: 中优先级（可延期到下阶段）

### 2.2 交付物详细说明

#### D1: 项目架构搭建
- **内容：** 初始化 Electron + React + Vite 项目
- **包含：** package.json、配置文件、目录结构
- **验收：** 能够运行 `pnpm dev` 并显示窗口

#### D2: 数据库 Schema
- **内容：** SQL 建表语句
- **包含：** focus_items、settings 表
- **验收：** 能够成功创建数据库和表

#### D3: 数据库操作封装
- **内容：** database.js 模块
- **包含：** CRUD 操作、初始化逻辑
- **验收：** 单元测试通过（可选）

#### D4: IPC 通信层
- **内容：** preload.js + ipc.js
- **包含：** 10 个核心 API
- **验收：** 渲染进程能够调用主进程 API

#### D5: 专注事项 CRUD
- **内容：** useFocusStore + 相关组件
- **包含：** 增删改查功能
- **验收：** 能够完整操作专注事项

#### D6: 计时器组件
- **内容：** Timer.jsx + useTimerStore
- **包含：** 倒计时显示、控制逻辑
- **验收：** 计时精度误差 < 1 秒

#### D7: 事项管理页面
- **内容：** Items.jsx + 相关组件
- **包含：** 列表展示、表单操作
- **验收：** UI 完整、操作流畅

#### D8: 系统通知模块
- **内容：** notification.js
- **包含：** 通知显示、音效播放
- **验收：** 通知正常显示

#### D9: MVP Demo
- **内容：** 可运行的开发版本
- **包含：** 所有核心功能
- **验收：** 完整流程可演示

#### D10: 技术文档
- **内容：** 架构说明、API 文档
- **包含：** 目录结构、数据模型
- **验收：** 新人能够看懂

---

## 3. 任务列表

### 3.1 Week 1 任务（Day 1-5）

#### Day 1: 项目初始化（2025-11-29）

**任务 ID: P1-D1-T1**
```
任务：初始化 Electron + React + Vite 项目
负责人：开发
预估时间：4h
优先级：P0

步骤：
□ 使用 electron-vite 模板创建项目
□ 配置 package.json（项目信息、脚本）
□ 安装核心依赖（5 个生产依赖）
□ 配置开发环境（热重载、DevTools）
□ 测试项目能否启动

产出：
- package.json
- vite.config.js
- electron.vite.config.js
- 可运行的空白应用

验收：
✓ 运行 pnpm dev 显示窗口
✓ 热重载正常工作
✓ DevTools 可以打开
```

**任务 ID: P1-D1-T2**
```
任务：创建项目目录结构
负责人：开发
预估时间：2h
优先级：P0

步骤：
□ 创建 src/main 目录
□ 创建 src/renderer 目录结构
□ 创建 src/preload 目录
□ 创建 database 目录
□ 创建 public 目录
□ 创建 .gitignore

产出：
- 完整的目录结构
- .gitignore 文件

验收：
✓ 目录结构符合规范（STANDARDS.md）
✓ .gitignore 包含必要的忽略项
```

**任务 ID: P1-D1-T3**
```
任务：编写 README.md
负责人：开发
预估时间：1h
优先级：P1

步骤：
□ 项目简介
□ 技术栈说明
□ 快速开始指南
□ 开发命令说明

产出：
- README.md

验收：
✓ 新人能够按照文档启动项目
```

---

#### Day 2: 数据库层实现（2025-11-30）

**任务 ID: P1-D2-T1**
```
任务：创建数据库 Schema
负责人：开发
预估时间：3h
优先级：P0

步骤：
□ 创建 database/schema.sql
□ 定义 focus_items 表
□ 定义 settings 表
□ 创建必要的索引
□ 测试 SQL 语句

产出：
- database/schema.sql

验收：
✓ SQL 语句无语法错误
✓ 表结构符合 PRD 定义
✓ 使用参数化查询（红线检查）
```

**任务 ID: P1-D2-T2**
```
任务：实现数据库操作封装
负责人：开发
预估时间：4h
优先级：P0

步骤：
□ 创建 main/database.js
□ 实现数据库初始化
□ 实现 getFocusItems()
□ 实现 createFocusItem()
□ 实现 updateFocusItem()
□ 实现 deleteFocusItem()
□ 创建默认模板

产出：
- main/database.js

验收：
✓ 所有 CRUD 操作正常
✓ 使用同步 API（better-sqlite3）
✓ 使用参数化查询（防 SQL 注入）
✓ 默认模板正确创建
```

---

#### Day 3: IPC 通信层（2025-12-01）

**任务 ID: P1-D3-T1**
```
任务：实现 Preload 脚本
负责人：开发
预估时间：2h
优先级：P0

步骤：
□ 创建 preload/index.js
□ 使用 contextBridge 暴露 API
□ 定义 window.api 接口
□ 实现专注事项相关 API

产出：
- preload/index.js

验收：
✓ 使用 contextBridge（红线要求）
✓ 不暴露 Node.js API（红线要求）
✓ API 命名符合规范（STANDARDS.md）
```

**任务 ID: P1-D3-T2**
```
任务：实现 IPC 处理器
负责人：开发
预估时间：2h
优先级：P0

步骤：
□ 创建 main/ipc.js
□ 注册 IPC 处理器
□ 连接到数据库层
□ 错误处理

产出：
- main/ipc.js

验收：
✓ 所有 IPC 调用正常
✓ 错误处理完整
✓ 使用 ipcMain.handle（推荐方式）
```

**任务 ID: P1-D3-T3**
```
任务：测试 IPC 通信
负责人：开发
预估时间：1h
优先级：P0

步骤：
□ 在渲染进程调用 window.api
□ 验证数据正确传递
□ 测试错误情况

产出：
- 测试代码（可选）

验收：
✓ IPC 通信双向正常
✓ 数据能够正确传递
```

---

#### Day 4: Zustand Store（2025-12-02）

**任务 ID: P1-D4-T1**
```
任务：实现 useFocusStore
负责人：开发
预估时间：3h
优先级：P0

步骤：
□ 创建 store/useFocusStore.js
□ 定义状态结构
□ 实现 loadItems()
□ 实现 createItem()
□ 实现 updateItem()
□ 实现 deleteItem()
□ 实现 selectItem()

产出：
- store/useFocusStore.js

验收：
✓ 使用 Zustand（红线要求）
✓ 状态管理逻辑正确
✓ 命名符合规范（use 前缀）
```

**任务 ID: P1-D4-T2**
```
任务：实现 useTimerStore
负责人：开发
预估时间：3h
优先级：P0

步骤：
□ 创建 store/useTimerStore.js
□ 定义计时器状态
□ 实现 start()
□ 实现 pause()
□ 实现 resume()
□ 实现 stop()
□ 实现 tick()

产出：
- store/useTimerStore.js

验收：
✓ 计时器状态管理正确
✓ 支持暂停/继续
```

---

#### Day 5: 核心组件（2025-12-03）

**任务 ID: P1-D5-T1**
```
任务：实现 Timer 组件
负责人：开发
预估时间：4h
优先级：P0

步骤：
□ 创建 components/Timer.jsx
□ 实现倒计时显示（MM:SS）
□ 实现精准计时（时间戳校准）
□ 集成 useTimerStore
□ 添加样式（Timer.module.css）

产出：
- components/Timer.jsx
- components/Timer.module.css

验收：
✓ 倒计时显示正确
✓ 计时精度 < 1 秒误差
✓ 使用 CSS Modules（红线要求）
✓ 组件命名 PascalCase（规范要求）
```

**任务 ID: P1-D5-T2**
```
任务：实现通用 Button 组件
负责人：开发
预估时间：1h
优先级：P1

步骤：
□ 创建 components/Button.jsx
□ 支持不同类型（primary/default）
□ 支持禁用状态
□ 添加样式

产出：
- components/Button.jsx
- components/Button.module.css

验收：
✓ 自定义组件（不使用 UI 库）
✓ 样式美观
```

**任务 ID: P1-D5-T3**
```
任务：实现 Modal 组件
负责人：开发
预估时间：2h
优先级：P1

步骤：
□ 创建 components/Modal.jsx
□ 支持打开/关闭
□ 支持自定义内容
□ 添加遮罩层

产出：
- components/Modal.jsx
- components/Modal.module.css

验收：
✓ 遮罩层正确
✓ 关闭功能正常
```

---

### 3.2 Week 2 任务（Day 6-10）

#### Day 6: 事项卡片组件（2025-12-06）

**任务 ID: P1-D6-T1**
```
任务：实现 FocusItemCard 组件
负责人：开发
预估时间：3h
优先级：P0

步骤：
□ 创建 components/FocusItemCard.jsx
□ 显示事项信息（名称、图标、颜色）
□ 显示配置信息（时长）
□ 显示统计信息（累计时长、次数）
□ 支持点击选择
□ 添加样式

产出：
- components/FocusItemCard.jsx
- components/FocusItemCard.module.css

验收：
✓ 信息显示完整
✓ 样式美观（简约现代）
✓ 点击交互正常
```

**任务 ID: P1-D6-T2**
```
任务：实现 FocusItemForm 组件
负责人：开发
预估时间：4h
优先级：P0

步骤：
□ 创建 components/FocusItemForm.jsx
□ 实现名称输入
□ 实现图标选择
□ 实现颜色选择
□ 实现时长配置（4 个输入框）
□ 实现表单验证
□ 实现提交逻辑

产出：
- components/FocusItemForm.jsx
- components/FocusItemForm.module.css

验收：
✓ 表单验证正确（名称必填）
✓ 提交逻辑正常
✓ 用户体验流畅
```

---

#### Day 7: 事项管理页面（2025-12-07）

**任务 ID: P1-D7-T1**
```
任务：实现 Items 页面
负责人：开发
预估时间：5h
优先级：P0

步骤：
□ 创建 pages/Items.jsx
□ 实现事项列表展示
□ 实现新建事项功能
□ 实现编辑事项功能
□ 实现删除事项功能
□ 集成 useFocusStore
□ 添加样式

产出：
- pages/Items.jsx
- pages/Items.module.css

验收：
✓ 列表正确显示所有事项
✓ CRUD 功能完整
✓ 数据持久化正常
✓ UI 简洁美观
```

**任务 ID: P1-D7-T2**
```
任务：实现删除确认功能
负责人：开发
预估时间：1h
优先级：P1

步骤：
□ 弹出确认对话框
□ 用户确认后删除
□ 显示删除结果

产出：
- 删除确认逻辑

验收：
✓ 防止误删
✓ 用户体验良好
```

---

#### Day 8: 主页面（2025-12-08）

**任务 ID: P1-D8-T1**
```
任务：实现 Home 页面
负责人：开发
预估时间：5h
优先级：P0

步骤：
□ 创建 pages/Home.jsx
□ 集成 Timer 组件
□ 实现控制按钮（开始/暂停/停止）
□ 实现事项选择功能
□ 显示当前事项信息
□ 显示今日统计
□ 添加样式

产出：
- pages/Home.jsx
- pages/Home.module.css

验收：
✓ 计时器功能完整
✓ 控制按钮正常工作
✓ 能够选择事项并开始
✓ UI 布局合理
```

**任务 ID: P1-D8-T2**
```
任务：实现侧边栏（事项快捷列表）
负责人：开发
预估时间：2h
优先级：P1

步骤：
□ 显示事项列表
□ 支持快速选择
□ 显示简单统计

产出：
- Sidebar 组件（可选）

验收：
✓ 快捷操作流畅
```

---

#### Day 9: 系统通知（2025-12-09）

**任务 ID: P1-D9-T1**
```
任务：实现系统通知模块
负责人：开发
预估时间：3h
优先级：P0

步骤：
□ 创建 main/notification.js
□ 实现 showNotification()
□ 添加通知音效（可选）
□ 在计时器结束时触发

产出：
- main/notification.js
- public/notification.mp3（可选）

验收：
✓ 通知正常显示
✓ 通知内容正确
✓ 音效播放正常（可选）
```

**任务 ID: P1-D9-T2**
```
任务：集成通知到计时器
负责人：开发
预估时间：2h
优先级：P0

步骤：
□ 在 useTimerStore 中调用通知
□ 工作结束时通知
□ 测试通知时机

产出：
- 集成代码

验收：
✓ 通知时机正确
✓ 通知内容准确
```

**任务 ID: P1-D9-T3**
```
任务：实现 App 路由
负责人：开发
预估时间：2h
优先级：P0

步骤：
□ 在 App.jsx 中实现页面切换
□ 使用条件渲染（不使用 React Router）
□ 实现导航栏

产出：
- App.jsx

验收：
✓ 页面切换正常
✓ 不使用 React Router（红线要求）
```

---

#### Day 10: 测试和优化（2025-12-10）

**任务 ID: P1-D10-T1**
```
任务：功能测试
负责人：开发
预估时间：3h
优先级：P0

步骤：
□ 测试专注事项 CRUD
□ 测试计时器功能
□ 测试数据持久化
□ 测试系统通知
□ 修复发现的 Bug

产出：
- Bug 列表
- 修复代码

验收：
✓ 核心功能正常
✓ 无重大 Bug
```

**任务 ID: P1-D10-T2**
```
任务：代码审查
负责人：开发
预估时间：2h
优先级：P0

步骤：
□ 检查红线违规
□ 检查代码规范
□ 清理 console.log
□ 清理未使用代码

产出：
- 代码审查报告

验收：
✓ 通过红线检查
✓ 符合代码规范
```

**任务 ID: P1-D10-T3**
```
任务：性能测试
负责人：开发
预估时间：1h
优先级：P1

步骤：
□ 测试启动时间
□ 测试计时器精度
□ 测试内存占用

产出：
- 性能测试报告

验收：
✓ 启动时间 < 2s
✓ 计时器精度 < 1s
```

**任务 ID: P1-D10-T4**
```
任务：编写技术文档
负责人：开发
预估时间：2h
优先级：P1

步骤：
□ 更新 README.md
□ 编写 API 文档
□ 编写架构说明

产出：
- 技术文档

验收：
✓ 文档清晰易懂
```

---

## 4. 依赖关系

### 4.1 任务依赖图

```
Day 1: 项目初始化
  └─> Day 2: 数据库层
       └─> Day 3: IPC 通信
            └─> Day 4: Zustand Store
                 ├─> Day 5: 核心组件
                 │    └─> Day 6: 事项组件
                 │         └─> Day 7: 事项页面
                 │              └─> Day 8: 主页面
                 │                   └─> Day 9: 系统通知
                 │                        └─> Day 10: 测试优化
                 └─> Day 9: 系统通知（并行）
```

### 4.2 关键路径

```
关键路径（10 天）:
Day 1 → Day 2 → Day 3 → Day 4 → Day 5 → Day 7 → Day 8 → Day 9 → Day 10

并行任务：
- Day 5-6: 核心组件和事项组件可并行
- Day 9: 系统通知可独立开发
```

### 4.3 阻塞风险

| 任务 | 阻塞后续任务 | 风险等级 | 应对策略 |
|------|-------------|---------|---------|
| Day 1: 项目初始化 | 所有任务 | 🔴 高 | 使用成熟模板 |
| Day 2: 数据库层 | Day 3-10 | 🔴 高 | 提前设计 Schema |
| Day 3: IPC 通信 | Day 4-10 | 🟡 中 | 参考官方文档 |
| Day 4: Store | Day 7-8 | 🟡 中 | 使用简单状态 |

---

## 5. 验收标准

### 5.1 功能性验收

#### 专注事项管理
```
□ 能够创建新的专注事项
  - 输入名称（必填）
  - 选择图标（默认 📊）
  - 选择颜色（默认蓝色）
  - 配置工作时长（默认 25 分钟）
  - 配置短休息（默认 5 分钟）
  - 配置长休息（默认 15 分钟）
  - 配置长休息间隔（默认 4）

□ 能够编辑已有事项
  - 修改配置后立即生效
  - 不影响历史数据

□ 能够删除事项
  - 弹出确认对话框
  - 删除后数据库中移除

□ 默认模板正确创建
  - 首次启动自动创建 4 个模板
  - 深度工作、快速处理、标准学习、创意工作
```

#### 计时器功能
```
□ 能够选择专注事项
  - 从列表中选择
  - 显示事项配置信息

□ 能够开始计时
  - 点击"开始专注"按钮
  - 倒计时开始
  - 按钮变为"暂停"

□ 能够暂停/继续
  - 点击"暂停"停止计时
  - 点击"继续"恢复计时
  - 时间准确（不多计或少计）

□ 能够停止
  - 点击"停止"结束会话
  - 倒计时归零
  - 按钮恢复为"开始专注"

□ 计时精度 < 1 秒
  - 使用时间戳校准
  - 误差在可接受范围内
```

#### 系统通知
```
□ 工作结束时显示通知
  - 标题："工作时段结束"
  - 内容：提示休息时长
  - 播放音效（可选）

□ 通知样式符合系统规范
  - Windows 原生通知
  - 包含应用图标
```

#### 数据持久化
```
□ 数据保存到本地数据库
  - 专注事项数据
  - 用户设置（可选）

□ 重启应用后数据仍在
  - 事项列表完整
  - 配置未丢失

□ 数据库文件位置正确
  - 使用 app.getPath('userData')
```

---

### 5.2 技术性验收

#### 项目架构
```
□ 使用 Electron + React + Vite
□ 仅安装 5 个生产依赖
  - react
  - react-dom
  - zustand
  - better-sqlite3
  - recharts（Phase 3 使用）
□ 目录结构符合规范
  - src/main
  - src/renderer
  - src/preload
  - database
  - public
```

#### 代码质量
```
□ 通过红线检查（见第 6 节）
□ 符合代码规范（见第 7 节）
□ 无 console.log / debugger
□ 无未使用的变量和导入
□ 函数长度 < 50 行
□ 嵌套深度 < 4 层
```

#### 性能指标
```
□ 启动时间 < 2 秒
  - 从运行 pnpm dev 到显示窗口
□ 计时器精度误差 < 1 秒
  - 25 分钟倒计时结束时误差 < 1s
□ 界面响应 < 100ms
  - 点击按钮到响应
□ 内存占用 < 200MB
  - 运行一段时间后检查
```

#### 安全性
```
□ Electron 配置安全
  - nodeIntegration: false
  - contextIsolation: true
  - 使用 preload 脚本

□ 无 SQL 注入风险
  - 使用参数化查询
  - 不拼接 SQL 字符串

□ 无 XSS 风险
  - 不使用 innerHTML
  - 不使用 dangerouslySetInnerHTML
```

---

### 5.3 用户体验验收

```
□ 界面简洁美观
  - 符合简约现代风格
  - 配色舒适

□ 操作流畅
  - 无明显卡顿
  - 动画自然（可选）

□ 错误提示友好
  - 表单验证提示清晰
  - 操作失败有反馈

□ 首次使用体验好
  - 默认模板可直接使用
  - 操作直观易懂
```

---

## 6. 红线检查

### 6.1 技术选型红线

```
☑️ 仅使用批准的 5 个生产依赖
  - react ✓
  - react-dom ✓
  - zustand ✓
  - better-sqlite3 ✓
  - recharts（Phase 3）

☑️ 不使用 UI 组件库
  - 无 Ant Design
  - 无 Material-UI
  - 无 Tailwind CSS
  - 自定义所有组件 ✓

☑️ 不使用其他状态管理库
  - 仅使用 Zustand ✓
  - 无 Redux
  - 无 MobX

☑️ 不使用 TypeScript（MVP 阶段）
  - 仅使用 JavaScript ✓
  - 无 .ts / .tsx 文件
```

### 6.2 架构模式红线

```
☑️ 不使用 React Router
  - 使用条件渲染 ✓
  - 仅 4 个页面，无需路由

☑️ 不过度抽象
  - 无 Base / Abstract 类
  - 无复杂设计模式
  - 直接实现 ✓

☑️ 不引入后端框架
  - 无 Express / Koa
  - 使用 IPC 通信 ✓
```

### 6.3 代码实践红线

```
☑️ 不使用 var
  - 仅使用 const / let ✓

☑️ 不使用 eval / Function
  - 无动态代码执行 ✓

☑️ 不使用 ==
  - 仅使用 === ✓

☑️ 不直接操作 DOM
  - 使用 React 组件 ✓
  - 无 document.getElementById

☑️ 函数长度 < 50 行
  - 复杂函数拆分 ✓

☑️ 嵌套深度 < 4 层
  - 使用早返回 ✓
```

### 6.4 安全红线

```
☑️ Electron 配置安全
  - nodeIntegration: false ✓
  - contextIsolation: true ✓
  - 使用 preload 脚本 ✓

☑️ 无 SQL 注入
  - 使用参数化查询 ✓
  - 不拼接 SQL ✓

☑️ 无 XSS
  - 不使用 innerHTML ✓
  - 不使用 dangerouslySetInnerHTML ✓

☑️ 不暴露 Node.js API
  - preload 仅暴露必要 API ✓
  - 使用 contextBridge ✓
```

### 6.5 性能红线

```
☑️ 无内存泄漏
  - 所有 useEffect 清理定时器 ✓
  - 所有事件监听器移除 ✓

☑️ 不阻塞主线程
  - 无长时间同步操作 ✓
  - 计算密集型任务分片 ✓
```

### 6.6 Git 红线

```
☑️ 不提交敏感文件
  - .gitignore 包含 node_modules ✓
  - .gitignore 包含 *.db ✓
  - .gitignore 包含 .env ✓

☑️ 不提交调试代码
  - 无 console.log ✓
  - 无 debugger ✓
  - 无 TODO（记录到 Issue）✓
```

---

## 7. 规范检查

### 7.1 代码风格规范

```
☑️ 缩进和空格
  - 使用 2 空格缩进 ✓
  - 操作符前后加空格 ✓
  - 逗号后加空格 ✓

☑️ 引号
  - 使用单引号 ✓
  - 模板字符串使用反引号 ✓

☑️ 分号
  - 不使用分号 ✓
  - 特殊情况（行首 [ 或 (）加分号 ✓

☑️ 花括号
  - 花括号与语句同行 ✓
  - 单行可省略，多行必须使用 ✓
```

### 7.2 命名规范

```
☑️ 文件命名
  - 组件：PascalCase.jsx ✓
  - 工具：camelCase.js ✓
  - Store：use{Name}Store.js ✓
  - 样式：{Name}.module.css ✓

☑️ 变量命名
  - 使用 camelCase ✓
  - 布尔值：is/has/can 前缀 ✓
  - 数组：复数形式 ✓

☑️ 函数命名
  - 动词开头 ✓
  - 事件：handle{Event} ✓
  - 布尔返回：is/has/can ✓

☑️ 常量命名
  - UPPER_SNAKE_CASE ✓
```

### 7.3 React 规范

```
☑️ 组件定义
  - 使用函数组件 ✓
  - PascalCase 命名 ✓
  - Props 解构 ✓

☑️ Hooks 使用
  - 顶层调用 ✓
  - 依赖数组正确 ✓
  - 自定义 Hooks 使用 use 前缀 ✓

☑️ JSX 规范
  - 自闭合标签 ✓
  - 多属性换行 ✓
  - 列表使用 key（稳定 ID）✓
```

### 7.4 CSS 规范

```
☑️ 使用 CSS Modules
  - *.module.css 文件 ✓
  - camelCase 类名 ✓

☑️ 属性顺序
  - 定位 > 盒模型 > 排版 > 视觉 ✓
```

### 7.5 注释规范

```
☑️ 文件头注释
  - 包含功能说明 ✓

☑️ 函数注释
  - 复杂函数添加 JSDoc ✓
  - 包含参数和返回值说明 ✓

☑️ 行内注释
  - 解释"为什么"而非"做什么" ✓
  - 不写显而易见的注释 ✓
```

### 7.6 Git 提交规范

```
☑️ 提交信息格式
  - <type>: <subject> ✓
  - feat: 新功能
  - fix: 修复
  - refactor: 重构

☑️ 提交内容
  - 每次提交解决一个问题 ✓
  - 提交信息清晰 ✓
```

---

## 8. 风险与应对

### 8.1 技术风险

#### 风险 1: Electron 环境配置复杂

**风险等级:** 🟡 中
**概率:** 中
**影响:** 高（阻塞所有开发）

**应对策略:**
1. **使用成熟模板:** electron-vite 官方模板
2. **提前准备:** Day 1 提前研究配置
3. **文档支持:** 详细阅读官方文档
4. **社区求助:** 遇到问题及时在社区提问

**应急计划:**
- 如果 Day 1 无法完成配置，延长到 Day 2
- 考虑使用更简单的 electron-forge

---

#### 风险 2: 计时器精度问题

**风险等级:** 🟡 中
**概率:** 中
**影响:** 中（影响用户体验）

**应对策略:**
1. **使用时间戳校准:** 而非累加秒数
2. **高频更新:** 每 100ms 更新一次
3. **充分测试:** Day 10 专门测试精度

**应急计划:**
- 如果误差 > 1 秒，调整更新频率
- 考虑使用 Web Worker（复杂度高）

---

#### 风险 3: 数据库操作错误

**风险等级:** 🟢 低
**概率:** 低
**影响:** 高（数据丢失）

**应对策略:**
1. **使用参数化查询:** 防止 SQL 注入
2. **异常处理:** try-catch 包裹所有操作
3. **数据验证:** 写入前验证数据

**应急计划:**
- 如果数据库损坏，提供重建功能
- 后续增加数据备份功能

---

### 8.2 进度风险

#### 风险 4: 任务延期

**风险等级:** 🟡 中
**概率:** 中
**影响:** 中（影响后续 Phase）

**应对策略:**
1. **每日站会:** 及时发现进度问题
2. **任务拆分:** 大任务拆小，便于跟踪
3. **优先级管理:** P0 任务优先完成

**应急计划:**
- 如果 Week 1 延期，压缩 Week 2 任务
- 将 P1 任务延期到 Phase 2

---

### 8.3 质量风险

#### 风险 5: Bug 过多

**风险等级:** 🟢 低
**概率:** 低
**影响:** 中（影响验收）

**应对策略:**
1. **代码审查:** 每日审查代码
2. **红线检查:** 提交前检查红线
3. **功能测试:** Day 10 充分测试

**应急计划:**
- 如果 Bug 过多，延长测试时间
- 必要时延期 1-2 天

---

## 9. 每日检查清单

### Day 1 检查清单
```
□ 项目能够运行 pnpm dev
□ 窗口正常显示
□ DevTools 可以打开
□ 热重载正常工作
□ 目录结构创建完成
□ README.md 编写完成
```

### Day 2 检查清单
```
□ database/schema.sql 创建完成
□ SQL 语句无语法错误
□ main/database.js 实现完成
□ 所有 CRUD 操作正常
□ 默认模板创建成功
□ 无 SQL 注入风险
```

### Day 3 检查清单
```
□ preload/index.js 实现完成
□ 使用 contextBridge
□ 不暴露 Node.js API
□ main/ipc.js 实现完成
□ IPC 通信测试通过
```

### Day 4 检查清单
```
□ useFocusStore 实现完成
□ useTimerStore 实现完成
□ 状态管理逻辑正确
□ 仅使用 Zustand
```

### Day 5 检查清单
```
□ Timer 组件实现完成
□ 倒计时显示正确
□ Button 组件实现完成
□ Modal 组件实现完成
□ 使用 CSS Modules
```

### Day 6 检查清单
```
□ FocusItemCard 组件完成
□ FocusItemForm 组件完成
□ 表单验证正确
□ 样式美观
```

### Day 7 检查清单
```
□ Items 页面实现完成
□ 事项 CRUD 功能正常
□ 删除确认功能正常
□ 数据持久化正常
```

### Day 8 检查清单
```
□ Home 页面实现完成
□ 计时器功能集成
□ 事项选择功能正常
□ 侧边栏实现完成（可选）
```

### Day 9 检查清单
```
□ notification.js 实现完成
□ 系统通知正常显示
□ 通知时机正确
□ App.jsx 路由实现完成
```

### Day 10 检查清单
```
□ 功能测试完成
□ 无重大 Bug
□ 代码审查通过
□ 性能测试通过
□ 技术文档编写完成
```

---

## 10. 阶段总结

### 10.1 预期成果

**完成时你将拥有：**
- ✅ 可运行的 MVP 版本
- ✅ 完整的项目架构
- ✅ 专注事项管理功能
- ✅ 基础计时器功能
- ✅ 本地数据持久化
- ✅ 系统通知功能

**技术债务（可接受）：**
- ⚠️ 无单元测试（Phase 2 补充）
- ⚠️ 仅本地存储（Phase 4 云端同步）
- ⚠️ 无数据统计（Phase 3 实现）
- ⚠️ 无自动休息（Phase 2 实现）

### 10.2 下一阶段准备

**Phase 2 前提条件：**
- ✅ Phase 1 所有 P0 任务完成
- ✅ 通过 M1 验收
- ✅ 无阻塞性 Bug

**Phase 2 预习：**
- 📖 阅读会话管理设计
- 📖 研究状态机模式（可选）
- 📖 准备 Phase 2 环境

---

**文档状态:** ✅ 已完成
**最后更新:** 2025-11-29
**下次审查:** 2025-12-06（Week 1 结束）

**准备好开始 Phase 1 了吗？** 🚀
